
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Developer Docs &#8212; RAPcores  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/material.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="https://wavedrom.com/skins/default.js"></script>
    <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Verilog Modules" href="internals.html" />
    <link rel="prev" title="RAPcores on ASIC" href="asic.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue-grey data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#dev" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="index.html" title="RAPcores  documentation"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">RAPcores</span>
          <span class="md-header-nav__topic"> Developer Docs </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="search.html" method="GET" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/rapcores/rapcores/" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    RAPcores
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = ""versions.json"",
        target_loc = "../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">RAPcores  documentation</a></li>
            
            <li class="md-tabs__item"><a href="https://rapcores.org" class="md-tabs__link">News</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="index.html" title="RAPcores documentation" class="md-nav__button md-logo">
      
        <img src="_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="index.html"
       title="RAPcores documentation">RAPcores</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/rapcores/rapcores/" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    RAPcores
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="releases.html" class="md-nav__link">Release Notes</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="releases.html#-030-current-development" class="md-nav__link">0.3.0 - (Current Development)</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="releases.html#-020-pathfinder2" class="md-nav__link">0.2.0 - “Pathfinder2”</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="releases.html#-010-pathfinder" class="md-nav__link">0.1.0 - “Pathfinder”</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="interfaces.html" class="md-nav__link">Software Programs</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="interfaces.html#rapcore-cli" class="md-nav__link">RAPcore-cli</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="interfaces.html#interactive-spi-using-raspi-julia" class="md-nav__link">Interactive SPI using RasPi + Julia</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="spi_spec.html" class="md-nav__link">SPI Specification</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="spi_spec.html#definitions" class="md-nav__link">Definitions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="spi_spec.html#versioning" class="md-nav__link">Versioning</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="spi_spec.html#overview" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="spi_spec.html#statusconfig-commands-0xf1-0xf2" class="md-nav__link">Status/Config Commands - (0xf1 0xf2)</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="spi_spec.html#coordinated-step-timer-0x01" class="md-nav__link">Coordinated Step Timer - 0x01</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="register_map.html" class="md-nav__link">Register Map</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="register_map.html#configuration-register-read-write" class="md-nav__link">Configuration Register - Read/Write</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="register_map.html#status-register-read-only" class="md-nav__link">Status Register - Read Only</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="configuration.html" class="md-nav__link">Board Configuration</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="configuration.html#makefile-mk-parameters" class="md-nav__link">Makefile (.mk) Parameters</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="configuration.html#spi-interface" class="md-nav__link">SPI Interface</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="configuration.html#pwm" class="md-nav__link">PWM</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="configuration.html#motors" class="md-nav__link">Motors</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="configuration.html#encoders" class="md-nav__link">Encoders</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="configuration.html#flow-control-and-events" class="md-nav__link">Flow Control and Events</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="configuration.html#move-buffer-size" class="md-nav__link">Move Buffer Size</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="configuration.html#dda" class="md-nav__link">DDA</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="configuration.html#internal-register-sizes" class="md-nav__link">Internal Register Sizes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="configuration.html#led" class="md-nav__link">LED</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="configuration.html#logic-analyzer" class="md-nav__link">Logic Analyzer</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="motor_control.html" class="md-nav__link">Motor Control</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="motor_control.html#electrical-commutation" class="md-nav__link">Electrical Commutation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="motor_control.html#bridge-control" class="md-nav__link">Bridge Control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="motor_control.html#motor-fault-types" class="md-nav__link">Motor Fault Types</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="motor_control.html#space-vector-modulation" class="md-nav__link">Space Vector Modulation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="motor_control.html#frequency-considerations" class="md-nav__link">Frequency Considerations</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="motor_control.html#commutation-tables" class="md-nav__link">Commutation Tables</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="motor_control.html#analytical-models" class="md-nav__link">Analytical Models</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="motor_control.html#references" class="md-nav__link">References</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="librapcore.html" class="md-nav__link">librapcore</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="asic.html" class="md-nav__link">RAPcores on ASIC</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="asic.html#mpw-one" class="md-nav__link">MPW-one</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Developer Docs </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Developer Docs</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#dev--page-root" class="md-nav__link">Developer Docs</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#build-prerequisites" class="md-nav__link">Build Prerequisites</a>
        </li>
        <li class="md-nav__item"><a href="#overview-of-make-targets" class="md-nav__link">Overview of Make targets</a>
        </li>
        <li class="md-nav__item"><a href="#board-targets" class="md-nav__link">Board targets</a>
        </li>
        <li class="md-nav__item"><a href="#formal-verification" class="md-nav__link">Formal Verification</a>
        </li>
        <li class="md-nav__item"><a href="#test-benches" class="md-nav__link">Test Benches</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#yosys-sim-bench" class="md-nav__link">Yosys Sim Bench</a>
        </li>
        <li class="md-nav__item"><a href="#yosys-cxxrtl-bench-experimental" class="md-nav__link">Yosys CXXRTL Bench (experimental)</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#formatting" class="md-nav__link">Formatting</a>
        </li>
        <li class="md-nav__item"><a href="#linting" class="md-nav__link">Linting</a>
        </li>
        <li class="md-nav__item"><a href="#developing-with-nix" class="md-nav__link">Developing with Nix</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#packages-included-in-nix-environment" class="md-nav__link">Packages included in Nix environment</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#helpful-articles" class="md-nav__link">Helpful Articles</a>
        </li>
        <li class="md-nav__item"><a href="#useful-tools" class="md-nav__link">Useful Tools</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="_sources/dev.md.txt">Show Source</a> </li>

  </ul>
</nav>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="#build-prerequisites" class="md-nav__link">Build Prerequisites</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#overview-of-make-targets" class="md-nav__link">Overview of Make targets</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#board-targets" class="md-nav__link">Board targets</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#formal-verification" class="md-nav__link">Formal Verification</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#test-benches" class="md-nav__link">Test Benches</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#formatting" class="md-nav__link">Formatting</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#linting" class="md-nav__link">Linting</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#developing-with-nix" class="md-nav__link">Developing with Nix</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#helpful-articles" class="md-nav__link">Helpful Articles</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#useful-tools" class="md-nav__link">Useful Tools</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html" class="md-nav__link">Verilog Modules</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="internals.html#pwm-pll-ice40-140" class="md-nav__link">pwm_pll_ice40_140</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#spi-pll-ecp5-64" class="md-nav__link">spi_pll_ecp5_64</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#mytimer-10" class="md-nav__link">mytimer_10</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#dda-fsm" class="md-nav__link">dda_fsm</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#dda-timer" class="md-nav__link">dda_timer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#register-input" class="md-nav__link">register_input</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#spi-state-machine" class="md-nav__link">spi_state_machine</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#pwm-pll" class="md-nav__link">pwm_pll</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#spi" class="md-nav__link">spi</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#microstep-counter" class="md-nav__link">microstep_counter</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#analog-out" class="md-nav__link">analog_out</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#pwm-pll-ecp5-150" class="md-nav__link">pwm_pll_ecp5_150</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#microstepper-top" class="md-nav__link">microstepper_top</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#pwm-pll-ecp5-200" class="md-nav__link">pwm_pll_ecp5_200</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#microstepper-control" class="md-nav__link">microstepper_control</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#quad-enc" class="md-nav__link">quad_enc</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#cosine" class="md-nav__link">cosine</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#edge-detector" class="md-nav__link">edge_detector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#chargepump" class="md-nav__link">chargepump</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#mytimer-8" class="md-nav__link">mytimer_8</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#rapcore" class="md-nav__link">rapcore</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#pwm" class="md-nav__link">pwm</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#mytimer" class="md-nav__link">mytimer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#clock-divider" class="md-nav__link">clock_divider</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#dual-hbridge" class="md-nav__link">dual_hbridge</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#spi-pll-ice40-64" class="md-nav__link">spi_pll_ice40_64</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="internals.html#space-vector-modulator" class="md-nav__link">space_vector_modulator</a>
      
    
    </li></ul>
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#dev--page-root" class="md-nav__link">Developer Docs</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#build-prerequisites" class="md-nav__link">Build Prerequisites</a>
        </li>
        <li class="md-nav__item"><a href="#overview-of-make-targets" class="md-nav__link">Overview of Make targets</a>
        </li>
        <li class="md-nav__item"><a href="#board-targets" class="md-nav__link">Board targets</a>
        </li>
        <li class="md-nav__item"><a href="#formal-verification" class="md-nav__link">Formal Verification</a>
        </li>
        <li class="md-nav__item"><a href="#test-benches" class="md-nav__link">Test Benches</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#yosys-sim-bench" class="md-nav__link">Yosys Sim Bench</a>
        </li>
        <li class="md-nav__item"><a href="#yosys-cxxrtl-bench-experimental" class="md-nav__link">Yosys CXXRTL Bench (experimental)</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#formatting" class="md-nav__link">Formatting</a>
        </li>
        <li class="md-nav__item"><a href="#linting" class="md-nav__link">Linting</a>
        </li>
        <li class="md-nav__item"><a href="#developing-with-nix" class="md-nav__link">Developing with Nix</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#packages-included-in-nix-environment" class="md-nav__link">Packages included in Nix environment</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#helpful-articles" class="md-nav__link">Helpful Articles</a>
        </li>
        <li class="md-nav__item"><a href="#useful-tools" class="md-nav__link">Useful Tools</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="_sources/dev.md.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="developer-docs">
<h1 id="dev--page-root">Developer Docs<a class="headerlink" href="#dev--page-root" title="Permalink to this headline">¶</a></h1>
<section id="build-prerequisites">
<h2 id="build-prerequisites">Build Prerequisites<a class="headerlink" href="#build-prerequisites" title="Permalink to this headline">¶</a></h2>
<p>RAPcores targets the FOSS synthesis, place and route, and bitstream tools. Namely yosys and

nextpnr. We are open to support other flows and open source tool chain. However do note

that RAPcores does use some SystemVerilog features supported by Yosys.</p>
<p>We recommend using a relatively recent build of these tools. The ones included in LTS Linux

distros may be out of date.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/YosysHQ/yosys">Yosys</a></p></li>
<li><p><a class="reference external" href="https://github.com/YosysHQ/nextpnr">nextpnr</a></p></li>
<li><p><a class="reference external" href="https://github.com/YosysHQ/icestorm">icestorm</a> (ice40 targets)</p></li>
<li><p><a class="reference external" href="https://github.com/YosysHQ/prjtrellis">prjtrellis</a> (ECP5 targets)</p></li>
<li><p><a class="reference external" href="https://github.com/YosysHQ/apicula">apicula</a> (Gowin targets)</p></li>
<li><p><a class="reference external" href="https://github.com/gatecat/prjoxide">prjoxide</a> (nexus targets)</p></li>
<li><p><a class="reference external" href="https://github.com/verilator/verilator">verilator</a> (Optional, for linting/testbenches)</p></li>
<li><p><a class="reference external" href="https://github.com/steveicarus/iverilog">iverilog</a> (Optional, for linting/testbenches)</p></li>
<li><p><a class="reference external" href="https://github.com/YosysHQ/SymbiYosys">SymbiYosys</a> (Optional, for formal verification)</p></li>
</ul>
</section>
<section id="overview-of-make-targets">
<h2 id="overview-of-make-targets">Overview of Make targets<a class="headerlink" href="#overview-of-make-targets" title="Permalink to this headline">¶</a></h2>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>Target</p></th>
<th class="head"><p>Arguments</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>clean</p></td>
<td><p>BOARD</p></td>
<td><p>remove build artifacts</p></td>
</tr>
<tr class="row-odd"><td><p>prog</p></td>
<td><p>BOARD</p></td>
<td><p>build and program BOARD</p></td>
</tr>
<tr class="row-even"><td><p>formal</p></td>
<td><p>BOARD</p></td>
<td><p>run formal verification</p></td>
</tr>
<tr class="row-odd"><td><p>stat</p></td>
<td><p>BOARD</p></td>
<td><p>get yosys synthesis statistics</p></td>
</tr>
<tr class="row-even"><td><p>iverilog-parse</p></td>
<td><p></p></td>
<td><p>parse the src directory with iverilog</p></td>
</tr>
<tr class="row-odd"><td><p>yosys-parse</p></td>
<td><p></p></td>
<td><p>parse the src directory with yosys</p></td>
</tr>
<tr class="row-even"><td><p>verilator-cdc</p></td>
<td><p></p></td>
<td><p>parse the src directory and run CDC checks with verilator</p></td>
</tr>
<tr class="row-odd"><td><p>triple-check</p></td>
<td><p></p></td>
<td><p>parse the src directory with yosys, iverilog, and verilator</p></td>
</tr>
<tr class="row-even"><td><p>yosys-{test}</p></td>
<td><p></p></td>
<td><p>run the testbench recipe in <code class="docutils literal notranslate"><span class="pre">testbench/yosys/{test}</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>cxxrtl-{test}</p></td>
<td><p></p></td>
<td><p>run the testbench recipe in <code class="docutils literal notranslate"><span class="pre">testbench/cxxrtl/{test}</span></code></p></td>
</tr>
<tr class="row-even"><td><p>docs-{fmt}</p></td>
<td><p></p></td>
<td><p>build docs in the specified format (e.g. docs-html)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="board-targets">
<h2 id="board-targets">Board targets<a class="headerlink" href="#board-targets" title="Permalink to this headline">¶</a></h2>
<p>The following targets require a <code class="docutils literal notranslate"><span class="pre">BOARD</span></code> to be specified.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">BOARD</span><span class="o">=&lt;</span><span class="n">board</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Generate bit stream.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">clean</span> <span class="n">BOARD</span><span class="o">=&lt;</span><span class="n">board</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Clean build artifacts.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">prog</span> <span class="n">BOARD</span><span class="o">=&lt;</span><span class="n">board</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Generate bitstream and upload.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">stat</span> <span class="n">BOARD</span><span class="o">=&lt;</span><span class="n">board</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Get logic synthesis statistics for the given configuration.</p>
</section>
<section id="formal-verification">
<h2 id="formal-verification">Formal Verification<a class="headerlink" href="#formal-verification" title="Permalink to this headline">¶</a></h2>
<p>SymbiYosys is used for formal verification of the code base. It can be run with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">formal</span> <span class="n">BOARD</span><span class="o">=&lt;</span><span class="n">board</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This command will create a <code class="docutils literal notranslate"><span class="pre">symbiyosys_&lt;board&gt;</span></code> directory in the <code class="docutils literal notranslate"><span class="pre">symbiyosys</span></code> directory

contains all the logs and data from the verification. If an assert or

cover fails, a <code class="docutils literal notranslate"><span class="pre">.vcd</span></code> file will be generated that will display the states

of registers and wires that induced the failure. GTKWave is a useful

program for viewing the <code class="docutils literal notranslate"><span class="pre">.vcd</span></code> files.</p>
<p>The base config for Symbiyosys is <code class="docutils literal notranslate"><span class="pre">symbiyosys.sby</span></code> in the <code class="docutils literal notranslate"><span class="pre">symbiyosys</span></code> directory.

Board specific defines are overlaid on top to ensure that each board configuration

can be validated.</p>
</section>
<section id="test-benches">
<h2 id="test-benches">Test Benches<a class="headerlink" href="#test-benches" title="Permalink to this headline">¶</a></h2>
<p>The main RAPcores source is tested for compatibility against Yosys, IVerilog, and Verilator.

In-tree testbenches use the Yosys suite with either the default ‘sim’ or ‘cxxrtl’ backends.</p>
<section id="yosys-sim-bench">
<h3 id="yosys-sim-bench">Yosys Sim Bench<a class="headerlink" href="#yosys-sim-bench" title="Permalink to this headline">¶</a></h3>
<p>The yosys test benches can be executed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">yosys</span><span class="o">-&lt;</span><span class="n">sim</span> <span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example:</p>
<p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">yosys-spi</span></code> will run the <code class="docutils literal notranslate"><span class="pre">spi.ys</span></code> simulation located in <code class="docutils literal notranslate"><span class="pre">testbench/yosys/&lt;sim</span> <span class="pre">name&gt;</span></code>.</p>
</section>
<section id="yosys-cxxrtl-bench-experimental">
<h3 id="yosys-cxxrtl-bench-experimental">Yosys CXXRTL Bench (experimental)<a class="headerlink" href="#yosys-cxxrtl-bench-experimental" title="Permalink to this headline">¶</a></h3>
<p>CXXRTL text benches are Verilog to C++ transpiled testbenches. To run these a compiler and C++ driver

program is required. 

The yosys CXXRTL test benches can be executed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">cxxrtl</span><span class="o">-&lt;</span><span class="n">sim</span> <span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example:</p>
<p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">cxxrtl-rapcore</span></code> will run the <code class="docutils literal notranslate"><span class="pre">rapcore.ys</span></code> simulation located in <code class="docutils literal notranslate"><span class="pre">testbench/cxxrtl/&lt;sim</span> <span class="pre">name&gt;</span></code>.</p>
</section>
</section>
<section id="formatting">
<h2 id="formatting">Formatting<a class="headerlink" href="#formatting" title="Permalink to this headline">¶</a></h2>
<p>All files should have <code class="docutils literal notranslate"><span class="pre">none</span></code> as the default nettype:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>`default_nettype none
</pre></div>
</div>
</section>
<section id="linting">
<h2 id="linting">Linting<a class="headerlink" href="#linting" title="Permalink to this headline">¶</a></h2>
<p>For parser compatibility and linting one can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">triple</span><span class="o">-</span><span class="n">check</span>
</pre></div>
</div>
<p>which will parse the source using Yosys, IVerilog, and Verilator.</p>
</section>
<section id="developing-with-nix">
<h2 id="developing-with-nix">Developing with Nix<a class="headerlink" href="#developing-with-nix" title="Permalink to this headline">¶</a></h2>
<p>RAPcores includes a <a class="reference external" href="../shell.nix">shell.nix</a> for use with the Nix Package manager.

This makes it easy to get a development environment with all build requirements installed

for you.</p>
<p>To start you will need to install Nix using the instructions <a class="reference external" href="https://nixos.wiki/wiki/Nix_Installation_Guide">here</a>.

They are reproduced here with some recommendations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sudo install -d -m755 -o $(id -u) -g $(id -g) /nix
curl -L https://nixos.org/nix/install | sh
source $HOME/.nix-profile/etc/profile.d/nix.sh &gt;&gt; ~/.bashrc
</pre></div>
</div>
<p>Then restart the terminal. Next, <code class="docutils literal notranslate"><span class="pre">cd</span></code> to the RAPcores directory. Run <code class="docutils literal notranslate"><span class="pre">nix-shell</span></code>, and some

packages will be installed. Once complete you should be able to run any of the <code class="docutils literal notranslate"><span class="pre">make</span></code> commands

below. This environment includes all the tools to synthesis, place, route, program, and

formally verify the RAPcores project.</p>
<section id="packages-included-in-nix-environment">
<h3 id="packages-included-in-nix-environment">Packages included in Nix environment<a class="headerlink" href="#packages-included-in-nix-environment" title="Permalink to this headline">¶</a></h3>
<p>Verilog frontends:</p>
<ul class="simple">
<li><p>yosys</p></li>
<li><p>verilog </p></li>
<li><p>verilator</p></li>
</ul>
<p>Place and route/databases:</p>
<ul class="simple">
<li><p>nextpnr</p></li>
<li><p>icestorm</p></li>
<li><p>trellis</p></li>
</ul>
<p>Formal verification:</p>
<ul class="simple">
<li><p>symbiyosys</p></li>
<li><p>yices</p></li>
</ul>
<p>Programmers:</p>
<ul class="simple">
<li><p>tinyprog</p></li>
<li><p>fujprog</p></li>
<li><p>openocd</p></li>
</ul>
</section>
</section>
<section id="helpful-articles">
<h2 id="helpful-articles">Helpful Articles<a class="headerlink" href="#helpful-articles" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>https://zipcpu.com/blog/2020/01/13/reuse.html</p></li>
<li><p>https://www.reddit.com/r/yosys/comments/6ulm3m/new_simulation_within_yosys/</p></li>
</ul>
</section>
<section id="useful-tools">
<h2 id="useful-tools">Useful Tools<a class="headerlink" href="#useful-tools" title="Permalink to this headline">¶</a></h2>
<p>Google’s Verilog formatter and linter:

- https://github.com/google/verible/</p>
</section>
</section>
<script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="asic.html" title="RAPcores on ASIC"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> RAPcores on ASIC </span>
              </div>
            </a>
          
          
            <a href="internals.html" title="Verilog Modules"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Verilog Modules </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2019-1980, RAPcore developers.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.0.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>